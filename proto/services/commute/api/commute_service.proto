syntax = "proto3";

package services.commute.api;

import "base/types/common.proto";
import "base/types/date_time.proto";
import "google/api/annotations.proto";
import "services/roommate/api/roommate_model.proto";

service CommuteService {
  // Calculates the average commute time for a location 30 days in the future
  rpc Calculate(CalculateRequest) returns (CalculateResponse) {
    option (google.api.http) = {
      post: "/calculate"
      body: "*"
    };
  }
}

message CalculateRequest {
  base.types.Address home_address = 1;
  optional bool disable_traffic = 2;
  string group_id = 3;
  base.types.TimezoneAwareTime home_departure_time = 4;
  base.types.TimezoneAwareTime point_of_interest_departure_time = 5;
}

message CalculateResponse {
  DepartReturn depart_from = 2;
  DepartReturn return_to = 3;

  message DepartReturn {
    repeated PointOfInterestDuration points_of_interest = 1;
  }
}

message PointOfInterestDuration {
  services.roommate.api.PointOfInterest point_of_interest = 1;
  base.types.Duration duration = 2;
}
